<!DOCTYPE html>
<html>
<head>
  <title>CanUI Grid</title>
  <style type="text/css">
    section {
      width: 50%;
      margin: 0 auto;
      border: 1px solid #EFEFEF;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    td, th {
      padding: 5px;
      border: 1px solid #505050;
    }
  </style>
</head>
<body style="padding-top: 30px;">

<div class="container">
  <section style="height: 200px;">
    <table id="grid" class="table table-bordered"></table>
  </section>
</div>


<script type="text/javascript" src="../../steal/steal.js"></script>
<script type="text/javascript">
  steal('jquery', 'canui/grid', 'can/model', 'can/util/fixture', 'steal/less',
    function ($) {
      steal('canui/table_scroll/table_scroll.less', function() {
        var Model = can.Model({
          findAll : 'GET /models'
        }, {});

        var store = can.fixture.make(40, function(i) {
          return {
            id : i,
            name : 'John ' + i,
            age : i + 20
          }
        });

        can.fixture('GET /models', store.findAll);

        $('#grid').grid({
          columns : [{
            header : 'Test',
            content : 'name'
          }, {
            header : 'Age',
            content : 'age'
          }],
          scrollable : true,
          list : Model.findAll()
        });
      });

//
//    // Setup
//    var Model = can.Model({}),
//        list = [];
//
//    for (var i = 0; i < 100; i++) {
//      list.push({ name : 'Test ' + i, age : Math.ceil(Math.random(100) * 100) });
//    }
//
//    // Model list
//    var people = Model.models(list),
//        getFilter = function() {
//          return {
//            min : parseInt($('[name="min-age"]').val()),
//            max : parseInt($('[name="max-age"]').val())
//          }
//        },
//        filter = new can.Observe(getFilter()),
//        filterCompute = can.compute(function () {
//          var folks = new can.Observe.List(), age;
//          for (var i = 0; i < people.attr('length'); i++) {
//            age = people.attr(i + '.age');
//            if (age >= filter.attr('min') && age <= filter.attr('max')) {
//              folks.push(people[i]);
//            }
//          }
//          return folks;
//        });
//
//    var grid = new can.ui.Grid('#grid', {
//      columns : [
//        {
//          header : 'Name',
//          content : 'name'
//        },
//        {
//          header : 'Age',
//          content : function(element, index) {
//            return can.view('ageEJS', { person : element });
//          }
//        },
//        {
//          header : 'Stuff',
//          content : function(element, index) {
//            return can.compute(function() {
//              return element.attr('name') + ' (' + element.attr('age') + ')';
//            });
//          }
//        }
//      ],
//      list : people
//    });
//
//    $('#update-filter').click(function(ev) {
//      ev.preventDefault();
//      // filter.attr(getFilter());
//      console.log([people[10], people[5]]);
//      console.log(grid.rows([people[10], people[5]]));
//    });
//
//    $('[data-cid]').click(function() {
//      var model = grid.items(this);
//      console.log(model);
//    });
  })
</script>
</body>
</html>